# Project 6

- **무선 엣지 영상보안 시스템 기술 개발** (2022 신규)

- **과제 목표** : 엣지 AI 보안지능에 대한 지속적 최적화 및 엣지 보안단말의 연계협업을 기반으로, 고립지원격지에 대한 치안 및 생활안전 강화가 가능한 무선 엣지 영상보안시스템 핵심 기술 개발
- **내 수행 과제** : 아래 두개는 비슷
  - 엣지 AI 보안지능 패키지의 등록·관리 기술 개발 (UI 및 클라이언트 포함)
    - 엣지 AI 보안지능 패키지 등록·관리 클라이언트 개발
    - 엣지 AI 보안지능 패키지 및 메타데이터 DB 구조 설계 및 구축
    - 엣지 AI 보안지능 패키지 및 메타데이터 저장·관리 기술 개발
  - 엣지 보안단말 등록·관리 클라이언트 개발 및 등록·관리 기술 설계 (UI 및 클라이언트 포함)
    - 엣지 보안단말 등록·관리 클라이언트 개발
    - 엣지 보안단말 정보 메타데이터 구조 설계
    - 엣지 보안단말 정보 저장 DB 구조 설계
    - 엣지 보안단말 등록·관리 인터페이스 설계
  - 이벤트 발생에 따른 연계협업



### 개발 환경

---

- Server : 
  - Node.js
- DB : 
  - MongoDB
- Container : 
  - Docker
- Deploy : 
  - Kubernetes
- Monitoring : 
  - Prometheus
  - Grafana



### DB 데이터 정보

---

#### AI 패키지 정보 등록/검색 DB 데이터

- AI 패키지 ID
- AI 패키지 명(한글)
- AI 패키지 파일 명
- 저작권자
- 설명
- 등록 날짜



#### 엣지 단말기 정보 등록/검색 DB 데이터

- 엣지 단말기 ID
- 엣지 단말기 명
- 엣지 단말기 IP 주소
- 엣지 단말기 포트번호
- 엣지 단말기 위치정보
  - 한글 주소(도로명 혹은 원하는 형식)
  - 위도
  - 경도
- 설명
- 등록 날짜



### daily

---

#### 0518

- 19일(목) 까지 사업계획서 읽어보고 1년차 시연 어떻게 할지 구성해보기



#### 0525

- 회의 기록
  - Do
    - 엣지 AI패키지 / 단말기 등록 시 필요한 DB 메타데이터 정보 정리해서 보고 (6월 2주까지)
    - 엣지 AI패키지 / 단말기 등록, 검색하는 MongoDB Test code 구성하기
  - Schedule
    - 6월만 3째주에 전체회의 / 매 월 첫째주 전체회의
    - 9월 초 보고서 작성예정이니 그 전까지 어느정도 완성되어야하고 9월 말 중간점검 보고



#### 0526

- 엣지 AI패키지 / 단말기 등록 시 필요한 DB 메타데이터 정보 정리



#### 0527

- 메타데이터 정보 확인 후 MongoDB 로 데이터 로직 구성하기



#### 0531

- 데이터 로직 구성



#### 0602

- 데이터 로직



#### 0603

- nodejs 교과서 로 mongoose 구성중



#### 0607

- p.390 routes/users.js 부터 다시 시작 !!



### 1년차 진행내용

---

- 내 파트에서 DB 사용은 하지 않음
- 쿠버네티스 클러스터링 및 AI SW 배포



#### 1024

- 무선엣지 진행
  - 자동으로 추출 가능한지 먼저 알아보고 진행하기
    - `pip freeze > requirements.txt` 명령어로 python 모듈 추출 가능
    - 서박사님파이을 python 이 아닌 exe 로 받아서 실행하는거 하는중
  - 서박사님 `main.py` 가 쿠버네티스 pod 으로 실행되었을때 실행이 어떻게 되는지 확인해보기
    - [exe 파일 배포 시 도커에 대한 질의응답](https://www.inflearn.com/questions/27871)
    - docker 에서 exe 게임 실행 시 바로 플레이되는거 보니 잘 실행되는듯? 계속 진행해보기
  - 진행 순서 : 
    1. window(master)-linux(worker) 를 클러스터링 할수 있는지 확인
       - 있다 : 예지누나(master)-서박사님(worker) 클러스터링
         - [리눅스(마스터)-윈도우(워커) 노드 클러스터링 하는 방법](https://people.wikimedia.org/~jayme/k8s-docs/v1.16/ko/docs/setup/production-environment/windows/user-guide-windows-nodes/)
       - **없다 : 예지누나(web server)-새로운 PC(master)-서박사님(worker) 클러스터링**
         - web server를 새로운PC(M)에서 실행하고 worker 와 클러스터링 하는 방향으로 하면 어떨지?
    2. 기존 keti2(M)-keti1(W)에서 서박사님 SW 가 잘 작동하는지 확인
       - dockerfile 작성 필요!
    3. 1번에서 새롭게 클러스터링 된 시스템에서 기존 rtsp 프로그램이 잘 작동하는지 확인
    4. 무선엣지 시스템에서 서박사님 SW 배포하고 잘 되는지 확인
       - 화면이 자동으로 안뜰 수 있음.. web서버가 아닌 이런 경우에는 어떻게? 일단 서박사님 프로그램 완성되면 클러스터링 후 배포해보기
  - 서박사님 `main.py` 돌리기 위해 pip install 리스트
    - PyQt5
    - torch
    - ml-collections
    - torchvision
  - 현재 진행중 : 
    - 1개 미니PC(edge01)에 쿠버네티스까지 **설치 완료**
    - 서박사님 pc - edge01 의 역할 정하기
      - 마스터노드 or 워커노드
    - 1.web server 를 마스터노드에서 실행시킬지? or 2.기존 서버에서 실행시키고 마스터 노드에서 k8s 를 실행시킬 수 있는 API 서버를 실행시킬지? 정해야함
      - 2번이 유력한데 2년차 app.py 의 형태와 비슷하게 진행
      - **현재 웹앱 시나리오** : 
        - 단말등록 : 기존의 클러스터링으로 worker node 추가하는 기능
        - 엣지 AI 등록 : SW 업로드 기능
        - 엣지 AI 배포 : SW 배포 기능



#### 1025

- **만들어야 하는 마스터노드에서 실행되는 API 서버 시나리오** : 
  - 단말등록 : 기존의 클러스터링으로 worker node 추가하는 기능
  - 엣지 AI 등록 : SW 업로드 기능
  - 엣지 AI 배포 : SW 배포 기능
- 진행 완료 : 
  - 1개 미니PC(edge01)에 쿠버네티스까지 **설치 완료**
- 진행중 : 
  - 서박사님 pc - edge01 의 역할 정하기
    - 마스터노드 or 워커노드
    - 아직 어떻게 진행할지 모르고, keti2-keti1 으로 잘 돌아가는지만 확인
  - 기존 keti2(M)-keti1(W)에서 서박사님 SW 가 잘 작동하는지 확인
    - dockerfile 작성 필요!
  - 기존 서버에서 실행시키고 마스터 노드에서 k8s 를 실행시킬 수 있는 API 서버를 만들어야함